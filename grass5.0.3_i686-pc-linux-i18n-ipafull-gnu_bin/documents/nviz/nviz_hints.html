<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <meta name="GENERATOR" content="Mozilla/4.76 [de] (X11; U; Linux 2.2.16 i686) [Netscape]">
<title>GRASS 5.0 Tutorial for nviz</title>
 </head>
<body bgcolor="#FFFFFF" link="#0000DF" vlink="#006000">

<P>
<A HREF="nviz_toc.html">INDEX</A>
</P>

<h2>NVIZ - Hints</h2>
</A> <P>

<H3>General</H3> <P>

One nifty trick for navigating around Nviz is the "paste" feature
supported in Tcl/Tk menus.  Any pulldown menu may be pasted
permanently on the screen by selecting the menu using the middle mouse
button (as opposed to the first mouse button).  The user may then
click and drag the menu to another location on the screen.  The menu
will remain in its new position, regardless of the selections made
from it, until the menu item which created the pulldown is selected
using the first mouse button.  For example, you can keep the "Panel"
menu up for the duration of an Nviz session by selecting "Panel" from
the main menu using the middle mouse button.  Selecting "Panel" with
the first mouse button moves the pasted menu back to its normal
position and removes the menu after a selection has been made.
<P>

<h3> Lighting </h3><p>

Lighting greatly enhances the level of detail that can be seen in the
surface.  For good lighting effects, position the light so that it
creates a tilted half-moon on the sphere.  Usually placing the light
in the N-W corner when viewing from the south works well because of
the way humans tend to interpret shading.  To reveal very subtle
gradual elevation changes, experiment with light placement and surface
reflectivity.  Keep resolution higher (3 or 4) while adjusting viewing
position and lighting so that drawing time is fast.  Then lower
polygon resolution to 1 or 2 for the final rendering of the surface.
<p>

When rendering frames for animation, it is usually better to position
lights so that they do not move with the viewer position (toggle
<em>Follow Viewpoint</em></strong> OFF).  <p>

<h3> <A NAME="Hanim">Animation</A> </h3><p>

What follows is an example of creating an animation to help you get
started.  <p>

<h4> Key frames </h4><p>

Using key frames is one of the easiest methods of animation it just
takes some getting use to the <em>Key Frame</em></strong> slider.  For
practice, just try making a circular path while always looking at the
center of the data: <p>

<OL> 

<LI> use <em>look here</em></strong> to mark a fixed center of view in
the middle of the surface. <p>


<LI> move the puck in the <em>XY position</em></strong> box to the
southeast corner, adjust <em>Height</em></strong> and
<em>Perspective</em></strong> until the data surface fills your
graphics window.  <p>


<LI> pop up the <strong>Keyframe</em></strong> panel.  <p>

<LI> Click on <em>add a key frame</em></strong>.  <p>

<LI> position the <em>Key Frame</em></strong> slider bar to the next
place to add a key frame by clicking a half inch or so farther along
the slider.  <p>

<LI> move the <em>XY position</em></strong> puck to the northeast
corner.  <p>

<LI> Click on <em>add a key frame</em></strong> and repeat step 5.  <p>

<LI> move the <em>XY position</em></strong> puck to the northwest
corner.  <p>


<LI> Click on <em>add a key frame</em></strong>.  <p>

You should now have enough key frames marked to define a path, so try
clicking on <em>show path</em></strong> and then <em>run</em></strong>
(NOT <em>run and save images</em></strong>).  If nothing happens,
clear all key frames and go back to step 1.  Now let's complete the
circular path: <p>

<LI> repeat step 5.  <p>

<LI> move the <em>XY position</em></strong> puck to the southwest
corner.  <p>

<LI> Click on <em>add a key frame</em></strong>.  <p>

<LI> Now to close the loop, move the <em>Key Frames</em></strong>
slider down to frame 1, so that the first frame is displayed, release
the mouse button, then click once on the slider in the empty part,
past the last key frame, and click on <em>add a key frame</em></strong>.
This essentially copies the first key frame to the fifth &amp; last
key frame.  <p>

</OL>

Now click on <em>run</em></strong>.  When the animation stops, adjust
the spline tension or use linear interpolation, change the number of
total frames, and run again.  If you wanted to render the animated
frames to .rgb files, you would now toggle <em>show path</em></strong>
OFF and click on <em>run and save images</em></strong>, but why not
wait until you get a little more creative - image files use a lot of
disk space.  <p>

<strong>Changing key frames:</em></strong> With the above key frames
loaded, try changing a key frame as follows: <p>

<OL>

<LI> Position the <em>Key Frames</em></strong> slider so that it
aligns with the arrow marking the second key frame.  <p>

<LI> Using the <em>Height</em></strong> adjustment in the
<strong>Movement</em></strong> panel, raise your viewing position.
Notice that if you have <em>show path</em></strong> toggled ON, you
can see how your viewing position changes relative to the defined path
by watching the south or east path views.  The small red dot
represents your current position.  <p>

<LI> Click on <em>add a key frame</em></strong>.  You will be asked in
dialog box if you want to replace the old key frame:click <em>ok
</em></strong>.  <p>

<LI> Run the animation again to see how the path has changed.  <p>

<LI> Delete the middle key frame: grab its arrow marker (using your
left mouse button), drag the marker completely off the slider to the
garbage can icon at right, and release the mouse button.  A dialog box
will ask if you really want to delete. Click <em>ok
</em></strong>. Run again to see how path has changed.  <p>

<LI> Set total frames to about 50, then one at a time, grab the center
key frame markers and slide them toward the right so that they are
spaced something like: <p>

<PRE>
1........2..3..4  
</PRE><p>

Run again, notice how movement speed was affected. <P>

<LI> Reverse the direction of travel by swapping the positions of the
two interior key frame markers.  <p>

</OL>

Parameters stored in the key frame path include viewing position and
looking direction.  The looking direction will be overridden though,
when the path is running, if <em>look here</em></strong> is active.
To see this effect with the above path loaded, select <em>look
here</em></strong> and click on a corner of the data, setting a new
fixed center of view.  Now run the path again.  Click on <em>look
cancel</em></strong> and run again. 
<A HREF="http://www2.gis.uiuc.edu:2280/modviz/viz/movies/flight.mpg">This</A>
is an example animation created in this way.  <p>

<h4> <strong> Image File Management </em></strong> </h4><p>

Because .rgb image files can end up taking a lot of disk space, users
should be mindful of disk storage capacity when attempting to create
an animation.  Keeping animation files and image dumps in directories
dedicated for such files helps in management.  A single rgb image
usually takes between 200K to 3M bytes of storage, depending upon size
and complexity.  If you use the SGI <em>movie</em></strong> program to
replay animations, each frame of the animation must have been saved to
files of identical dimensions; so especially if you are creating an
animation piecewise, at different sessions, it becomes important to
maintain a consistent size for the graphics window.  With the
<em>movie</em></strong> program and with other screen dump animating
programs, there is a zoom option to enlarge the animation images at
time of playback.  So if you want the animation to fill your screen,
you could set the width and height of the graphics window to half or a
third their playback sizes when writing the image files, then use the
zoom option (this will cause a loss of resolution though, since the
zoom just replicates pixels).  If you are making an animation to be
recorded onto video tape, it may be necessary to set the width and
height to specific dimensions.  <p>

New SGI programs released with IRIX 4.0.5,
<em>moviemaker</em></strong> and <em>movieplayer</em></strong>, are
also very useful for animations. <em>Moviemaker</em></strong> allows
you to create movie files from any number of rgb files at various
frame rates.  With <em>movieplayer</em></strong>, much longer
animations may be replayed than with <em>movie</em></strong> since the
frames are read directly from disk at run time rather than having to
be loaded into memory.  <p>

</BODY>
</HTML>