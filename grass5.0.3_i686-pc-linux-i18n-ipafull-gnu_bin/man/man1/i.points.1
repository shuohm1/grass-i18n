i.points(1)                   Grass User's Manual                  i.points(1)



NNAAMMEE
       ii..ppooiinnttss   -  An imagery function that enables the user to mark coordi-
       nate system points on an image to be rectified and then input the coor-
       dinates  of  each  point  for  creation  of a coordinate transformation
       matrix.  The transformation matrix is needed as  input  for  the  GRASS
       program _i_._r_e_c_t_i_f_y.
       _(_G_R_A_S_S _I_m_a_g_e _P_r_o_c_e_s_s_i_n_g _P_r_o_g_r_a_m_)

SSYYNNOOPPSSIISS
       ii..ppooiinnttss

DDEESSCCRRIIPPTTIIOONN
       _i_._p_o_i_n_t_s is an imagery function that enables the user to mark points on
       a (raster) image to be rectified and then input the geographic  coordi-
       nates  of  each  point  for  calculation of a coordinate transformation
       matrix.  _i_._p_o_i_n_t_s must be followed by use of the GRASS  program  _i_._r_e_c_-
       _t_i_f_y, which rectifies the image using the transformation matrix coeffi-
       cients calculated by _i_._p_o_i_n_t_s.


       _R_e_c_t_i_f_i_c_a_t_i_o_n is the mapping (transformation)  of  an  image  from  one
       coordinate  system to another.  The geometry of an image extracted into
       a GRASS LOCATION having an x,y coordinate system  is  not  planimetric.
       To  create  a planimetric image, that is, to convert the x,y coordinate
       system into a standard coordinate system (for example, the UTM  coordi-
       nate  system  or  the State Plane coordinate system), points from a map
       having the standard coordinates must be associated with the same points
       on the image to be rectified.  _i_._p_o_i_n_t_s enables the user to mark points
       on an  image  and  input  the  standard  coordinates  for  that  point.
       _i_._p_o_i_n_t_s then calculates a least squares regression using the two coor-
       dinate systems (x,y and standard) for the marked points.  A matrix con-
       taining transformation coefficients is the output file for _i_._p_o_i_n_t_s.


       During  the process of marking points and entering map coordinates, the
       user can compute the RMS  (root  mean  square)  error  for  each  point
       entered.  _i_._p_o_i_n_t_s does this by calculating the transformation equation
       (the same one that is calculated in the GRASS program  _i_._r_e_c_t_i_f_y),  and
       then plugging these results into an equation for RMS error.


       _i_._p_o_i_n_t_s  offers  a  zoom  option  to  locate precisely the point to be
       marked on an image.  This program also offers the user  the  option  of
       acquiring  standard  coordinates for a marked point from a map layer in
       the target data base.


       _i_._t_a_r_g_e_t must be run before running _i_._p_o_i_n_t_s to enable the PLOT  RASTER
       option  to be used and to identify a target data base LOCATION_NAME and
       MAPSET for the rectified image.  To run _i_._p_o_i_n_t_s, a graphics monitor is
       required.


       The procedure for marking points, entering coordinates, and calculating
       RMS error is described below.


       The first prompt in the program asks the user for the imagery group  to
       be  registered.   Note that if _i_._t_a_r_g_e_t is not run before _i_._p_o_i_n_t_s, the
       _i_._p_o_i_n_t_s program will display the following error message:
       ERROR: Target information for group [spot] missing
              Please run i.target for group [spot]

       After entering the group to be registered the terminal screen  displays
       the message:
             Use mouse now...

       The graphics monitor displays the following screen:
        ______________________________________________________________
       | imagery  filename  (mag)        |  target  filename  (mag)  |
       |_________________________________|___________________________|
       |                                 |                           |
       |                                 |                           |
       |                                 |                           |
       |                                 |                           |
       |                                 |                           |
       |                                 |                           |
       |                                 |                           |
       |_________________________________|___________________________|
       |                                 |                           |
       |                                 |                           |
       |                                 |                           |
       |                                 |                           |
       |                                 |                           |
       |                                 |                           |
       |                                 |                           |
       |_________________________________|___________________________|
       | QUIT  ZOOM  PLOT RASTER  ANALYZE|                           |
       |_________________________________|___________________________|

       A  pop-down menu like that shown below will be superimposed on the left
       half of the screen:
               __________________________________
              | Double click on raster map layer|
              |          to be plotted          |
              |   Double click here to cancel   |
              |_________________________________|

                      ____________________
                     |    Mapset demo    |
                     |___________________|
                     | spotclass|  spot.1|
                     |__________|________|
                     | composite|  spot.2|
                     |__________|________|
                     | spot.3   |        |
                     |__________|________|

       Any single raster map layer in the imagery group may be used  on  which
       to  mark  points,  and the user can mark points on more than one raster
       map layer in the imagery group to accumulate the suggested minimum num-
       ber  of  12  points.   Any raster map layer in the imagery group can be
       rectified (using _i_._r_e_c_t_i_f_y) based on the transformation matrix computed
       from these points.


       The  imagery  file  chosen  by  the user is displayed in the upper left
       quadrant of the screen.

ZZOOOOMM
       To magnify the displayed file, the user  must  place  the  mouse  cross
       hairs  on  the word ZOOM.  The following menu will then be displayed at
       the bottom of the screen:
          ____________________________________________
         | Cancel|  Box|  Point|  Select type of ZOOM|
         |_______|_____|_______|_____________________|

       The user has the option of identifying the zoom region either by  using
       the mouse to make a box, or by using the mouse to mark the two diagonal
       points of the desired region.  The terminal screen will display a mouse
       button  menu  to guide the user in identifying the corner points of the
       region.

MMAARRKKIINNGG PPOOIINNTTSS
       To mark the points on the image that correspond  to  the  points  on  a
       standard  coordinate  system  map,  the user must place the mouse cross
       hairs on the corresponding location on the image to be marked and press
       the  left  hand  button  on the mouse.  A diamond shaped symbol will be
       marked on the image.  The user's terminal will  display  the  following
       menu:
        ___________________________________________________________
       | Point 1 marked on the image at|                          |
       | East: 1023.77                 |                          |
       | North: -164.41                |                          |
       |                               |                          |
       |                               |                          |
       |                               |                          |
       |                               |                          |
       |                               |                          |
       |__________________________________________________________|
       | Enter coordinates as east north:                         |
       |__________________________________________________________|

       The  user  then  enters the easting and northing (separated by a space)
       for the point marked on the image.  If the user wishes not to  enter  a
       coordinate,  he  or  she may simply hit RETURN to return control to the
       mouse;  the marked point then disappears.

PPLLOOTT RRAASSTTEERR
       In addition to acquiring reference points from a standard map, the user
       has  the  option  of  acquiring  the reference points from a raster map
       layer in the target data base LOCATION_NAME.  The data base raster  map
       layer  is  displayed by placing the mouse cross hairs on the words PLOT
       RASTER.  The following line is then displayed  at  the  bottom  of  the
       graphics monitor:
              ________________________________________________
             | Cancel|  Indicate which side should be plotted|
             |_______|_______________________________________|

       Which  side  of  the  graphics monitor is to be plotted is indicated by
       placing the mouse cross hairs on  the  half  of  the  graphics  monitor
       screen  that  the  user  would like to use, and pressing the left mouse
       button.  The following pop-down menu will be superimposed on  the  half
       of the screen that was chosen:
           _________________________________________
          | Double click on raster (cell) map layer|
          |              to be plotted             |
          |       Double click here to cancel      |
          |________________________________________|

                 ______________________________
                |         Mapset demo         |
                |_____________________________|
                | tm.rectified |              |
                |______________|______________|
                | tm.classified|              |
                |_____________________________|
                |       Mapset PERMANENT      |
                |_____________________________|
                | elevation    |  geology     |
                |______________|______________|
                | slope        |  soils       |
                |______________|______________|
                | aspect       |              |
                |______________|______________|
                | roads        |              |
                |______________|______________|

       After  the  raster map layer is displayed the following message appears
       at the bottom of the graphics monitor:
            ______________________________________
            | input method |  keyboard|  screen|
            |_________________|__________|________|

       If the user wishes to use the plotted raster map layer only as  a  com-
       parative  reference,  then  the  keyboard can be chosen as the means to
       input coordinates corresponding to the  marked  points  on  the  image.
       This  is done by placing the mouse cross hairs on the word KEYBOARD and
       pressing the left button on the mouse.


       If the user selects the SCREEN option, then points marked on the  image
       will  automatically  be associated with the coordinates from the corre-
       sponding points on the target data base map  layer.   In  this  option,
       when  the  user  marks a point on the image, the following menu is dis-
       played at the terminal:
       ___________________________________________________________
       | Point 5 marked on the image at|                          |
       | East: 1023.77                 |                          |
       | North: -164.41                |                          |
       |                               |                          |
       |                               |                          |
       | Point located at              |                          |
       | East: 679132.57               |                          |
       | North: 4351080.67             |                          |
       |                               |                          |
       |                               |                          |
       |                               |                          |
       |                               |                          |
       |                               |                          |
       |__________________________________________________________|
       | use mouse now...                                         |
       |__________________________________________________________|

       The user then uses the mouse to mark a corresponding point on the  dis-
       played image from the target data base.  The coordinates for the target
       data base map layer are automatically saved as the  coordinates  corre-
       sponding to the marked point on the image.

AANNAALLYYZZEE
       After  a number of points have been marked (4 to 7), the user can check
       the RMS error of the points marked on the image.  This is done by plac-
       ing  the  mouse  cross  hairs  on the word ANALYZE at the bottom of the
       graphics monitor.  An error  report  resembling  that  shown  below  is
       superimposed on the graphics monitor:
       ______________________________________________________________________
       |         error                 image                 target         |
       |#     row     col    target    east    north      east       north  |
       |____________________________________________________________________|
       |1     0.0     -0.9    1.0     1048.5   -144.8   679132.5   4351080.6|
       |2     0.4     1.0     1.3     2153.1   -567.2   684314.7   4399001.4|
       |3    -1.2     -0.5     .6     1452.8   -476.5   567841.4   3457682.8|
       |4     1.1     0.5     1.3     1034.0   -109.2   677573.8   4352626.4|
       |5    -2.7     14.0    14.2    1048.6   -144.9   679132.6   4351080.7|
       |                                                                    |
       |____________________________________________________________________|
       |    overall   rms    error:   4.46                                  |
       |____________________________________________________________________|

       The following menu then appears at the bottom of the graphics monitor:
        ____________________________________________________________________
       | DONE|  PRINT FILE|   Double click on point to be included/excluded|
       |_____|____________|________________________________________________|

       The  RMS  error  for the image is given under the column TITLEd "error"
       and subTITLEd "row" and "col".  In the above report, point number 1  is
       0.0  rows  and -0.9 columns from the predicted location calculated from
       the transformation equation.  The RMS error for the target  raster  map
       layer  is listed under the heading "target".  This is the RMS error for
       the east and north coordinates of the target map layer, but it is  pre-
       sented  in the table using one general value.  The overall RMS error is
       displayed at the bottom of the screen in meters.   Points  that  create
       high  RMS  error  are  displayed in red on the graphics monitor (repre-
       sented here in italics).


       The location of the point marked on the imagery  group  file  is  given
       under  the heading "image" and the subheadings "east" and "north".  The
       location of the point in the target data base is given under the  head-
       ing "target" and the subheadings "east" and "north".  If the user would
       like to exclude or include a point, this can be accomplished by placing
       the  mouse cross hairs on the point number to be included (if the point
       is absent) or excluded (if the point is  displayed)  and  pressing  the
       left  button  on  the mouse twice.  When a point is excluded, it is not
       afterwards included in the calculation of the RMS error, or included in
       the  final  transformation matrix.  However, it can be retrieved within
       _i_._p_o_i_n_t_s at any time by double clicking with  the  mouse  as  described
       above.

QQUUIITT
       To  end  the  _i_._p_o_i_n_t_s  program place the mouse cross hairs on the word
       QUIT;  the marked points (including coordinates) will be saved.

NNOOTTEESS
       A good rule of thumb is to mark at least 12  to  15  points  which  are
       evenly  distributed  over  the  entire  imagery  group file in order to
       obtain an accurate transformation equation for the  rectification  pro-
       cess.   The  RMS  error  may  increase  with more points added, but the
       transformation equation will be more accurate.


       An RMS error of less than or equal to approximately one resolution unit
       (pixel  or  cell) for the image being rectified is generally considered
       acceptable.


       In order to use a digitizer  with  _i_._p_o_i_n_t_s,  at  least  one  digitizer
       driver  besides  "none"  (the on-screen digitizer) must be available in
       the digitcap file.


       This program is interactive and requires no command line arguments.

SSEEEE AALLSSOO
       _G_R_A_S_S _T_u_t_o_r_i_a_l_: _I_m_a_g_e _P_r_o _c_e_s_s_i_n_g


       _g_._m_a_p_s_e_t_s

       _i_._g_r_o_u_p

       _i_._r_e_c_t_i_f_y

       _i_._t_a_r_g_e_t

AAUUTTHHOORR
       Michael Shapiro, U.S.Army Construction Engineering Research Laboratory

       _L_a_s_t _c_h_a_n_g_e_d_: _$_D_a_t_e_: _2_0_0_2_/_0_1_/_2_5 _0_5_:_4_5_:_3_3 _$



GRASS 5.0                                                          i.points(1)
